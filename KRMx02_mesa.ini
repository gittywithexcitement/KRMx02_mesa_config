# Generated by PNCconf at Sun May 20 21:27:04 2018
# If you make changes to this file, they will be
# overwritten when you run PNCconf again

[EMC]
MACHINE = KRMx02_mesa
DEBUG = 0

[DISPLAY]
DISPLAY = axis
POSITION_OFFSET = RELATIVE
POSITION_FEEDBACK = ACTUAL
MAX_FEED_OVERRIDE = 1.2
MAX_SPINDLE_OVERRIDE = 1.000000
MIN_SPINDLE_OVERRIDE = 0.500000
INTRO_GRAPHIC = linuxcnc.gif
INTRO_TIME = 1
PROGRAM_PREFIX = /home/dank/linuxcnc/nc_files
INCREMENTS = .1in .05in .01in .005in .001in .0005in .0001in
POSITION_FEEDBACK = ACTUAL
DEFAULT_LINEAR_VELOCITY = 0.250000
MAX_LINEAR_VELOCITY = 1.000000
MIN_LINEAR_VELOCITY = 0.016670
DEFAULT_ANGULAR_VELOCITY = 12.000000
MAX_ANGULAR_VELOCITY = 180.000000
MIN_ANGULAR_VELOCITY = 1.666667
EDITOR = code
GEOMETRY = xyz
PYVCP = custompanel.xml

[FILTER]
PROGRAM_EXTENSION = .png,.gif,.jpg Greyscale Depth Image
PROGRAM_EXTENSION = .py Python Script
png = image-to-gcode
gif = image-to-gcode
jpg = image-to-gcode
py = python

[TASK]
TASK = milltask
CYCLE_TIME = 0.010

[RS274NGC]
PARAMETER_FILE = linuxcnc.var

[EMCMOT]
EMCMOT = motmod
COMM_TIMEOUT = 1.0
COMM_WAIT = 0.010
SERVO_PERIOD = 1000000

[HOSTMOT2]
# **** This is for info only ****
# DRIVER0=hm2_pci
# BOARD0=5i25

[HAL]
HALUI = halui
HALFILE = KRMx02_mesa.hal
HALFILE = custom.hal
HALFILE = xbox.hal
# TODO
#POSTGUI_HALFILE = custom_postgui.hal
POSTGUI_HALFILE = postgui_call_list.hal
SHUTDOWN = shutdown.hal


[HALUI]
# MDI commands 00-02. Used in xbox.hal
##### Set G54's 0 point to current location for each axis #####
# set the X axis current location in coordinate system 1-G54 to 0
MDI_COMMAND = G10 L20 P1 X0
# set the Y axis current location in coordinate system 1-G54 to 0
MDI_COMMAND = G10 L20 P1 Y0
# set the Z axis current location in coordinate system 1-G54 to 0
MDI_COMMAND = G10 L20 P1 Z0

##### Probe for Z touch off #####
# MDI commands 03-08
# set G54 Z offset to 0
MDI_COMMAND = G10 L2 P1 Z0

# Z down until probe contact, fast. Stop at Z1.5 if no probe contact.
MDI_COMMAND = G38.2 Z1.5 F45 G90

# Z up until loss of contact. If you do this too slowly it will complain of probe contact during non MDI command. This is caused by the switch signal bouncing on and off and the solution is a debounce filter, or move away faster.
MDI_COMMAND = G38.4 Z7 F30 G90

# Z down until probe contact, slowest
MDI_COMMAND = G38.2 Z1.5 F0.15 G90

# Setup Z in G54 such that the top of the stock is Z0 and the current Z position is the height at which depth probe contact is made.
MDI_COMMAND = G10 L20 P1 Z1.0049

# Rapid to Z max
MDI_COMMAND = G0 Z6.95 G53

##### Other python panel commands #####
# MDI command 09
# Set X0 in G54 such that the current X position is X-.1285  The intention is for you to: touch a 1/4 end mill to the left side of your stock with a .0035 inch spacer (piece of paper), then press this button; X0 is now the left edge of your stock.
MDI_COMMAND = G10 L20 P1 X-.1285
# Same as above, except touching the right edge of your stock, which will be considered X0 (instead of the left edge).
# MDI command 10
MDI_COMMAND = G10 L20 P1 X+.1285

# Same as above, except setting Y0 by touching the bottom (when viewed from above/+Z) or top edge of the stock
# MDI command 11
MDI_COMMAND = G10 L20 P1 Y-.1285
# MDI command 12
MDI_COMMAND = G10 L20 P1 Y+.1285

[TRAJ]
AXES = 3
COORDINATES = X Y Z
LINEAR_UNITS = inch
ANGULAR_UNITS = degree
CYCLE_TIME = 0.010
DEFAULT_VELOCITY = 0.75
MAX_LINEAR_VELOCITY = 7.5

[EMCIO]
EMCIO = io
CYCLE_TIME = 0.100
TOOL_TABLE = tool.tbl

#********************
# Axis X
#********************
[AXIS_0]
TYPE = LINEAR
HOME = 0.1521
MAX_VELOCITY = 7.12501735806
MAX_ACCELERATION = 20.0
# The values below should be 25% larger than MAX_VELOCITY and MAX_ACCELERATION
# If using BACKLASH compensation STEPGEN_MAXACCEL should be 100% larger.
STEPGEN_MAXVEL = 9.0
STEPGEN_MAXACCEL = 25.0
# G540 manual: Your step pulse width must be at least 2uS wide and the pulse polarity for the step and direction signals are ACTIVE HIGH.
# these are in nanoseconds
DIRSETUP   = 4200
DIRHOLD    = 4200

# this is not optimized. Experiment.
STEPLEN    = 4000 
# this is not optimized. Experiment.
STEPSPACE  = 4000 

STEP_SCALE = -1909.8593171
MIN_LIMIT = 0.0
MAX_LIMIT = 30.7
HOME_OFFSET = -0.0041
HOME_SEARCH_VEL = -0.250000
HOME_LATCH_VEL = -0.005
HOME_FINAL_VEL = 0.000000
HOME_IGNORE_LIMITS = YES
HOME_IS_SHARED = 1
HOME_SEQUENCE = 1
HOME_USE_INDEX = NO
VOLATILE_HOME = 1

#********************
# Axis Y
#********************
[AXIS_1]
TYPE = LINEAR
HOME = 0.5
MAX_VELOCITY = 7.12501735806
MAX_ACCELERATION = 20.0
# The values below should be 25% larger than MAX_VELOCITY and MAX_ACCELERATION
# If using BACKLASH compensation STEPGEN_MAXACCEL should be 100% larger.
STEPGEN_MAXVEL = 9.0
STEPGEN_MAXACCEL = 25.0
# these are in nanoseconds
DIRSETUP   = 4200
DIRHOLD    = 4200
STEPLEN    = 4000
STEPSPACE  = 4000
STEP_SCALE = 1909.8593171
MIN_LIMIT = 0.0
MAX_LIMIT = 26.13
HOME_OFFSET = -0.014300
HOME_SEARCH_VEL = -0.250000
HOME_LATCH_VEL = -0.005
HOME_FINAL_VEL = 0.000000
HOME_IGNORE_LIMITS = YES
HOME_IS_SHARED = 1
HOME_SEQUENCE = 2
HOME_USE_INDEX = NO
VOLATILE_HOME = 1

#********************
# Axis Z
#********************
[AXIS_2]
TYPE = LINEAR
HOME = 6.95
MAX_VELOCITY = 1.667
MAX_ACCELERATION = 20.0
# The values below should be 25% larger than MAX_VELOCITY and MAX_ACCELERATION
# If using BACKLASH compensation STEPGEN_MAXACCEL should be 100% larger.
STEPGEN_MAXVEL = 2.0
STEPGEN_MAXACCEL = 25.0
# these are in nanoseconds
DIRSETUP   = 4200
DIRHOLD    = 4200
STEPLEN    = 4000
STEPSPACE  = 4000
STEP_SCALE = 4010.004
MIN_LIMIT = -0.0
MAX_LIMIT = 6.9605
HOME_OFFSET = 7.000000
HOME_SEARCH_VEL = 0.750000
HOME_LATCH_VEL = 0.005
HOME_FINAL_VEL = 0.000000
HOME_IGNORE_LIMITS = YES
HOME_SEQUENCE = 0
HOME_USE_INDEX = NO
VOLATILE_HOME = 1
